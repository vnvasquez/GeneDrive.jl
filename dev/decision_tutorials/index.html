<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Decision Model · GeneDrive.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="GeneDrive.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">GeneDrive.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../features/">Features</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../datasetup_tutorials/">Data Model</a></li><li><a class="tocitem" href="../dynamic_tutorials/">Dynamic Model</a></li><li class="is-active"><a class="tocitem" href>Decision Model</a></li></ul></li><li><a class="tocitem" href="../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Decision Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Decision Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vnvasquez/GeneDrive.jl/blob/master/docs/src/decision_tutorials.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><ul></ul><h1 id="decision_model"><a class="docs-heading-anchor" href="#decision_model">Decision Model</a><a id="decision_model-1"></a><a class="docs-heading-anchor-permalink" href="#decision_model" title="Permalink"></a></h1><p>The following shows how to build and solve optimization problems in <code>GeneDrive.jl</code>. Decision models allow us to determine the best (optimal) strategy for achieving a goal (objective), taking into account the limitations (constraints) of our system of interest. </p><p>To set up the decision model, it is necessary to define an additional component for our data model: our problem&#39;s operational limitations (constraints). Operational constraints enter the simulation as fields of the <code>ReleaseStrategy</code> struct and are defined per node. View struct fields by running: </p><pre><code class="language-julia hljs">julia&gt; ? 
help?&gt; ReleaseStrategy</code></pre><p>Biological constraints are pre-defined within the decision model. For brevity, we will specify our example operational constraints on top of the <code>node3</code> data model created previously. </p><pre><code class="language-julia hljs"># Define constraints using desired fields (re-use `release_genotype`)
node3_strategy = ReleaseStrategy(release_this_gene_index = release_genotype,
    release_this_life_stage = Male, release_start_time = 7,
    release_size_max_per_timestep = 1000)

# Assign constraints to dict of nodes
mystrategy = Dict(1 =&gt; node3_strategy)

# Build the optimization problem (re-use `node3`, `tspan`)
prob = create_decision_model(node3, tspan; node_strategy = mystrategy);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">A JuMP Model
Feasibility problem with:
Variables: 16426
`JuMP.AffExpr`-in-`MathOptInterface.EqualTo{Float64}`: 5475 constraints
`JuMP.AffExpr`-in-`MathOptInterface.LessThan{Float64}`: 2191 constraints
`JuMP.QuadExpr`-in-`MathOptInterface.EqualTo{Float64}`: 3285 constraints
`JuMP.VariableRef`-in-`MathOptInterface.EqualTo{Float64}`: 3286 constraints
`JuMP.VariableRef`-in-`MathOptInterface.GreaterThan{Float64}`: 13140 constraints
Nonlinear: 3285 constraints
Model mode: AUTOMATIC
CachingOptimizer state: EMPTY_OPTIMIZER
Solver name: Ipopt
Names registered in the model: E, E_con_A0, E_con_A1, E_con_B0, E_con_B1, F, F_con_0, F_con_1, L, L_con_A0, L_con_A1, L_con_B0, L_con_B1, M, M_con_0, M_con_1, P, P_con_A0, P_con_A1, P_con_B0, P_con_B1, Sets, control_F, control_M, control_limit_schedule, control_limit_total, mate_bound, migration_E, migration_L, migration_M, migration_P, release_location</code></pre><p>To solve the decision model as an optimization, a goal (objective) must be supplied. However, even in the absence of an objective function we can derive useful information: without an objective, the solution method auto-selected by <code>GeneDrive.jl</code> acts as a nonlinear solver and allows us to compare the behavior of our dynamic and decision models. </p><pre><code class="language-julia hljs"># Solve
sol = solve_decision_model(prob);

# Format all results for analysis
results = format_decision_model_results(sol);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Any, Any} with 8 entries:
  :node_1_organism_1_E         =&gt; 365×3 DataFrame…
  :node_1_organism_1_P         =&gt; 365×3 DataFrame…
  :node_1_organism_1_F         =&gt; 365×3 DataFrame…
  :node_1_organism_1_M         =&gt; 365×3 DataFrame…
  :node_1_organism_1_control_M =&gt; 365×3 DataFrame…
  :node_1_organism_1_L         =&gt; 365×3 DataFrame…
  :Time                        =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10  …  356, 357, …
  :node_1_organism_1_control_F =&gt; 365×3 DataFrame…</code></pre><p>To visualize a subset of the results, run <code>plot_decision_ridl_females(sol)</code>. Because no objective function was specified, this output should qualitatively match those from the dynamic model when no intervention is conducted (i.e. when using the same data model, and no RIDL release object is passed to <code>solve_dynamic_model</code>).  </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dynamic_tutorials/">« Dynamic Model</a><a class="docs-footer-nextpage" href="../api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.16 on <span class="colophon-date" title="Tuesday 3 May 2022 16:20">Tuesday 3 May 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
